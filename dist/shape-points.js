!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((t=t||self).ShapePoints={})}(this,(function(t){"use strict";function r(t,r,n,e,o,u){const a=[];let s=n;const i=(e-n)/(u=u||5);for(let n=0;n<u;n++)a.push(t+o*Math.cos(s),r+o*Math.sin(s)),s+=i;return a}function n(t,r,n,e,o,u,a,s,i){const f=[],c=1/(i=i||5);for(let i=0;i<=1;i+=c){const c=Math.pow(1-i,3),h=3*i*Math.pow(1-i,2),m=3*Math.pow(i,2)*(1-i),l=Math.pow(i,3);f.push(c*t+h*n+m*o+l*a,c*r+h*e+m*u+l*s)}return f}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var e=function(t,r){return t(r={exports:{}},r.exports),r.exports}((function(t,r){!function(t){function r(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function n(t,r,n,e,o,s){var c,h,m,l=function(t,r,n){var e,o,s,c,h,m,l,d;o=0,s=t.length/2;var p=u(r,10);for(h=0,m=t.length;h<m;h++)l=t[h],d=a(0,n[h],p,10),c=i.subtract(f.q(r,d),l),(e=c[0]*c[0]+c[1]*c[1])>o&&(o=e,s=h);return[o,s]}(t,c=function(t,r,n,e){var o,u,a,s,c,h,m,l,d,p,b,I,M,g,v,y,A,L=t[0],P=t[t.length-1];for(o=[L,null,null,P],u=i.zeros_Xx2x2(r.length),M=0,g=r.length;M<g;M++)y=r[M],A=1-y,(a=u[M])[0]=i.mulItems(n,3*y*(A*A)),a[1]=i.mulItems(e,3*A*(y*y));for(s=[[0,0],[0,0]],c=[0,0],M=0,g=t.length;M<g;M++)y=r[M],a=u[M],s[0][0]+=i.dot(a[0],a[0]),s[0][1]+=i.dot(a[0],a[1]),s[1][0]+=i.dot(a[0],a[1]),s[1][1]+=i.dot(a[1],a[1]),v=i.subtract(t[M],f.q([L,L,P,P],y)),c[0]+=i.dot(a[0],v),c[1]+=i.dot(a[1],v);return h=s[0][0]*s[1][1]-s[1][0]*s[0][1],m=s[0][0]*c[1]-s[1][0]*c[0],l=c[0]*s[1][1]-c[1]*s[0][1],d=0===h?0:l/h,p=0===h?0:m/h,I=i.vectorLen(i.subtract(L,P)),d<(b=1e-6*I)||p<b?(o[1]=i.addArrays(L,i.mulItems(n,I/3)),o[2]=i.addArrays(P,i.mulItems(e,I/3))):(o[1]=i.addArrays(L,i.mulItems(n,d)),o[2]=i.addArrays(P,i.mulItems(e,p))),o}(t,n,e,o),r);return h=l[0],m=l[1],s&&s({bez:c,points:t,params:r,maxErr:h,maxPoint:m}),[c,h,m]}function e(t,r,n){return n.map((function(n,e){return o(t,r[e],n)}))}function o(t,r,n){var e=i.subtract(f.q(t,n),r),o=f.qprime(t,n),u=i.mulMatrix(e,o),a=i.sum(i.addItems(i.squareItems(o),i.mulMatrix(e,f.qprimeprime(t,n))));return 0===a?n:n-u/a}var u=function(t,r){for(var n,e=[0],o=t[0],u=0,a=1;a<=r;a++)n=f.q(t,a/r),u+=i.vectorLen(i.subtract(n,o)),e.push(u),o=n;return e=e.map((function(t){return t/u}))};function a(t,r,n,e){if(r<0)return 0;if(r>1)return 1;for(var o,u,a,s,i=1;i<=e;i++)if(r<=n[i]){a=(i-1)/e,u=i/e,s=(r-(o=n[i-1]))/(n[i]-o)*(u-a)+a;break}return s}function s(t,r){return i.normalize(i.subtract(t,r))}var i=function(){function t(){r(this,t)}return t.zeros_Xx2x2=function(t){for(var r=[];t--;)r.push([0,0]);return r},t.mulItems=function(t,r){return[t[0]*r,t[1]*r]},t.mulMatrix=function(t,r){return t[0]*r[0]+t[1]*r[1]},t.subtract=function(t,r){return[t[0]-r[0],t[1]-r[1]]},t.addArrays=function(t,r){return[t[0]+r[0],t[1]+r[1]]},t.addItems=function(t,r){return[t[0]+r,t[1]+r]},t.sum=function(t){return t.reduce((function(t,r){return t+r}))},t.dot=function(r,n){return t.mulMatrix(r,n)},t.vectorLen=function(t){var r=t[0],n=t[1];return Math.sqrt(r*r+n*n)},t.divItems=function(t,r){return[t[0]/r,t[1]/r]},t.squareItems=function(t){var r=t[0],n=t[1];return[r*r,n*n]},t.normalize=function(t){return this.divItems(t,this.vectorLen(t))},t}(),f=function(){function t(){r(this,t)}return t.q=function(t,r){var n=1-r,e=i.mulItems(t[0],n*n*n),o=i.mulItems(t[1],3*n*n*r),u=i.mulItems(t[2],3*n*r*r),a=i.mulItems(t[3],r*r*r);return i.addArrays(i.addArrays(e,o),i.addArrays(u,a))},t.qprime=function(t,r){var n=1-r,e=i.mulItems(i.subtract(t[1],t[0]),3*n*n),o=i.mulItems(i.subtract(t[2],t[1]),6*n*r),u=i.mulItems(i.subtract(t[3],t[2]),3*r*r);return i.addArrays(i.addArrays(e,o),u)},t.qprimeprime=function(t,r){return i.addArrays(i.mulItems(i.addArrays(i.subtract(t[2],i.mulItems(t[1],2)),t[0]),6*(1-r)),i.mulItems(i.addArrays(i.subtract(t[3],i.mulItems(t[2],2)),t[1]),6*r))},t}();t.exports=function(t,r,o){if(!Array.isArray(t))throw new TypeError("First argument should be an array");if(t.forEach((function(t){if(!Array.isArray(t)||2!==t.length||"number"!=typeof t[0]||"number"!=typeof t[1])throw Error("Each point should be an array of two numbers")})),(t=t.filter((function(r,n){return 0===n||!(r[0]===t[n-1][0]&&r[1]===t[n-1][1])}))).length<2)return[];var u=t.length,a=s(t[1],t[0]),f=s(t[u-2],t[u-1]);return function t(r,o,u,a,s){var f,c,h,m,l,d,p,b,I,M,g,v,y;if(2===r.length)return v=i.vectorLen(i.subtract(r[0],r[1]))/3,[f=[r[0],i.addArrays(r[0],i.mulItems(o,v)),i.addArrays(r[1],i.mulItems(u,v)),r[1]]];c=function(t){var r,n,e,o=[];return t.forEach((function(t,u){r=u?n+i.vectorLen(i.subtract(t,e)):0,o.push(r),n=r,e=t})),o=o.map((function(t){return t/n}))}(r);var A=n(r,c,c,o,u,s);if(f=A[0],m=A[1],d=A[2],m<a)return[f];if(m<a*a)for(h=c,l=m,p=d,y=0;y<20;y++){h=e(f,r,h);var L=n(r,c,h,o,u,s);if(f=L[0],m=L[1],d=L[2],m<a)return[f];if(d===p){var P=m/l;if(P>.9999&&P<1.0001)break}l=m,p=d}return g=[],0===(b=i.subtract(r[d-1],r[d+1]))[0]&&0===b[1]&&((b=i.subtract(r[d-1],r[d]).reverse())[0]=-b[0]),I=i.normalize(b),M=i.mulItems(I,-1),g=(g=g.concat(t(r.slice(0,d+1),o,I,a,s))).concat(t(r.slice(d),M,u,a,s))}(t,a,f,r,o)}}(t)}));t.arc=r,t.bezierCurveThrough=function(){let t=5,r=50;const o=[];if(Array.isArray(arguments[0])){const n=arguments[0];for(let t=0;t<n.length;t+=2)o.push([n[t],n[t+1]]);2===arguments.length&&(t=arguments[1].pointsInArc,r=arguments[1].curveError)}else{let n=arguments.length;arguments.length%2==1&&(t=arguments[--n].pointsInArc,r=arguments[n].curveError);for(let t=0;t<n;t+=2)o.push([arguments[t],arguments[t+1]])}if(2===o.length)return[o[0][0],o[0][1],o[1][0],o[1][1]];if(o.length<4)return[];const u=[],a=e(o,r);for(let r=0;r<a.length;r++){const e=a[r];u.push(...n(e[0][0],e[0][1],e[1][0],e[1][1],e[2][0],e[2][1],e[3][0],e[3][1],t))}return u},t.bezierCurveTo=n,t.circle=function(t,r,n,e){e=e||5;const o=[],u=2*Math.PI/(4*e);for(let e=0;e<2*Math.PI;e+=u)o.push(t+Math.cos(e)*n,r+Math.sin(e)*n);return o},t.ellipse=function(t,r,n,e,o){o=o||5;const u=[],a=2*Math.PI/(4*o);for(let o=0;o<2*Math.PI;o+=a)u.push(t-n*Math.sin(o),r-e*Math.cos(o));return u},t.line=function(t,r,n,e,o){o=o||0;const u=Math.atan2(e-r,n-t)-Math.PI/2,a=isNaN(o)?{start:o.start/2,end:o.end/2}:{start:o/2,end:o/2};return[t-Math.cos(u)*a.start,r-Math.sin(u)*a.start,n-Math.cos(u)*a.end,e-Math.sin(u)*a.end,n+Math.cos(u)*a.end,e+Math.sin(u)*a.end,t+Math.cos(u)*a.start,r+Math.sin(u)*a.start]},t.quadraticCurveTo=function(t,r,n,e,o,u,a){const s=[],i=1/(a=a||5);for(let a=0;a<=1;a+=i){const i=Math.pow(1-a,2),f=2*a*(1-a),c=Math.pow(a,2);s.push(i*t+f*n+c*o,i*r+f*e+c*u)}return s},t.rect=function(t,r,n,e){return[t-n/2,r-e/2,t+n/2,r-e/2,t+n/2,r+e/2,t-n/2,r+e/2]},t.roundedRect=function(t,n,e,o,u,a){if(a=a||5,isNaN(u)){u.topLeft=u.topLeft||0,u.topRight=u.topRight||0,u.bottomLeft=u.bottomLeft||0,u.bottomRight=u.bottomRight||0;const s=[t-e/2+u.topLeft,n-o/2,t+e/2-u.topRight,n-o/2];return u.topRight&&s.push(...r(t+e/2-u.topRight,n-o/2+u.topRight,3*Math.PI/2,2*Math.PI,u.topRight,a)),s.push(t+e/2,n-o/2+u.topRight,t+e/2,n+o/2-u.bottomRight),u.bottomRight&&s.push(...r(t+e/2-u.bottomRight,n+o/2-u.bottomRight,0,Math.PI/2,u.bottomRight,a)),s.push(t+e/2-u.bottomRight,n+o/2,t-e/2+u.bottomLeft,n+o/2),u.bottomLeft&&s.push(...r(t-e/2+u.bottomLeft,n+o/2-u.bottomLeft,Math.PI/2,Math.PI,u.bottomLeft,a)),s.push(t-e/2,n+o/2-u.bottomLeft,t-e/2,n-o/2+u.topLeft),u.topLeft&&s.push(...r(t-e/2+u.topLeft,n-o/2+u.topLeft,Math.PI,3*Math.PI/2,u.topLeft,a)),s}return[t-e/2+u,n-o/2,t+e/2-u,n-o/2,...r(t+e/2-u,n-o/2+u,3*Math.PI/2,2*Math.PI,u,a),t+e/2,n-o/2+u,t+e/2,n+o/2-u,...r(t+e/2-u,n+o/2-u,0,Math.PI/2,u,a),t+e/2-u,n+o/2,t-e/2+u,n+o/2,...r(t-e/2+u,n+o/2-u,Math.PI/2,Math.PI,u,a),t-e/2,n+o/2-u,t-e/2,n-o/2+u,...r(t-e/2+u,n-o/2+u,Math.PI,3*Math.PI/2,u,a)]},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=shape-points.js.map
